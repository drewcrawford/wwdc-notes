Apple U1

Present permissions to *both* devices.  
U1-equipped devices running iOS 14.

# Nearby interaction in iOS
* Distance
* Direction

Each device can run several sessions at the same time, each session with one other peer.

Start with creating a `NISession`.  Provide a configuration.

Peer discovery.  `NIDiscoveryToken` a temporary, randomly-generated device-session identifer.  Valid for the lifetime of the session.  If you invalidate the session, any session and its token become invalidated.
Token is generated by the system and is provided to your app.
You exchange the token through your app's networking layer.

Archive it through `NSSecureCoding`.  ex., you can use multipeer connectivity.

```swift
let session = NISession()
session.delegate = self

let myDiscoveryToken = session.discoveryToken
sendDiscoveryTokenToMyPeer(peer, myDiscoveryToken) //your method

//receive discovery token
let peerDiscoveryToken = ...

let config = NINearbyPeerConfiguration(peerToken: peerDiscoveryToken)

//run session with config
session.run(config)
```

## Demo
## Suspension
Sessions can only be active when your app is in the foreground.
Wait for a `sessionSsupensionEnded` before resuming
Suspended sessions do not resume automatically
Can resume by calling `run(...)`
Discovery token is still ok
## Invalidation
Error code
Cannot be run again
Tokens invalidated
Need to create a new session

# Streaming relative position updates

`NINearbyObject`

* `discoveryToken`
* `distance` -> distance from device in meters
* `direction`-> relative direction vector pointing at the device.

Note that these are **nullable**.


# Best practices

* Verify hardware support.
* Become familiar with the field of view.  It's a cone coming out of the back of the phone.  roughly corresponds with the ultrawide camera field of view on iPhone 11.  When you're inside the field of view, direction and distance updates should arrive.  If a device is outside FOV, app may get distance *without* direction.
* Require portrait orientation.  Mixed orientations will lead to limited measurement availability.  
* Be mindful of occlusions.  LOS is optimal.  Brick walls, people, or any body or object may reduce measurement availability
* Distance/direction will be `nil` when not available.  
* Simulator support in Xcode
* 